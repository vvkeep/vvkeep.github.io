

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/icon.jpeg">
  <link rel="icon" href="/images/icon.jpeg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="vvkeep">
  <meta name="keywords" content="">
  
    <meta name="description" content="一、网络层服务任务：将数据从源主机送达到目的主机 功能：  转发：当里输入链路接收到一个分组后，路由器需要决策那条输出链路将分组发送出去，并将分组从输入接口转移到输出接口 路由选择：当分组从源主机流向目的主机是，必须通过某种方式决定分组经过的路由或路径 连接建立：网络层连接是从源主机到目的主机主机经过的一条路径，这条路径经过的每个路由器等网络设备都要参与网络层连接的建立  二、数据报网络与虚电路网">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络原理-网络层">
<meta property="og:url" content="https://vvkeep.github.io/2022/03/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/%E7%BD%91%E7%BB%9C%E5%B1%82/index.html">
<meta property="og:site_name" content="vvkeep&#39;s blog">
<meta property="og:description" content="一、网络层服务任务：将数据从源主机送达到目的主机 功能：  转发：当里输入链路接收到一个分组后，路由器需要决策那条输出链路将分组发送出去，并将分组从输入接口转移到输出接口 路由选择：当分组从源主机流向目的主机是，必须通过某种方式决定分组经过的路由或路径 连接建立：网络层连接是从源主机到目的主机主机经过的一条路径，这条路径经过的每个路由器等网络设备都要参与网络层连接的建立  二、数据报网络与虚电路网">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://vvkeep.github.io/2022/03/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/%E7%BD%91%E7%BB%9C%E5%B1%82/ipv4.png">
<meta property="article:published_time" content="2022-03-09T13:54:33.000Z">
<meta property="article:modified_time" content="2022-04-16T09:13:46.740Z">
<meta property="article:author" content="vvkeep">
<meta property="article:tag" content="路由">
<meta property="article:tag" content="IP">
<meta property="article:tag" content="网络层">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://vvkeep.github.io/2022/03/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/%E7%BD%91%E7%BB%9C%E5%B1%82/ipv4.png">
  
  
  <title>计算机网络原理-网络层 - vvkeep&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"vvkeep.github.io","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":"235bcb93b73674205dcfe80bc941a80b","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.0.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>姚巍的博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="计算机网络原理-网络层">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-03-09 21:54" pubdate>
        2022年3月9日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.1k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      34 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">计算机网络原理-网络层</h1>
            
            <div class="markdown-body">
              <h1 id="一、网络层服务"><a href="#一、网络层服务" class="headerlink" title="一、网络层服务"></a>一、网络层服务</h1><p>任务：将数据从<strong>源主机</strong>送达到<strong>目的主机</strong></p>
<p>功能：</p>
<ol>
<li><strong>转发</strong>：当里输入链路接收到一个分组后，路由器需要决策那条输出链路将分组发送出去，并将分组从输入接口转移到输出接口</li>
<li><strong>路由选择</strong>：当分组从源主机流向目的主机是，必须通过某种方式决定分组经过的路由或路径</li>
<li><strong>连接建立</strong>：网络层连接是从源主机到目的主机主机经过的一条路径，这条路径经过的每个路由器等网络设备都要参与网络层连接的建立</li>
</ol>
<h1 id="二、数据报网络与虚电路网络"><a href="#二、数据报网络与虚电路网络" class="headerlink" title="二、数据报网络与虚电路网络"></a>二、数据报网络与虚电路网络</h1><h2 id="1-数据报网络（无连接服务）"><a href="#1-数据报网络（无连接服务）" class="headerlink" title="1. 数据报网络（无连接服务）"></a>1. 数据报网络（无连接服务）</h2><p>源主机没要发送一个分组，就为改分组加上<strong>目的主机地址</strong>,然后将改分组推进网络。每个路由器使用分组的<strong>目的主机地址</strong>转发分组</p>
<h2 id="2-虚电路网络（面向连接）"><a href="#2-虚电路网络（面向连接）" class="headerlink" title="2. 虚电路网络（面向连接）"></a>2. 虚电路网络（面向连接）</h2><ul>
<li><p>源主机到到目的主机的一条路径上建立的一条网络层逻辑连接，通信结束后再拆除连接</p>
</li>
<li><p>3个构成要素</p>
<ul>
<li>从源主机到目的主机之间的一条<strong>路径</strong>（一系列的链路和分组交换机）</li>
<li>改路径上的每条链路的<strong>虚电路标识</strong>（VCID）</li>
<li>分组交换机的转发表中记录虚电路标识的<strong>接续</strong>关系</li>
</ul>
</li>
</ul>
<h2 id="3-对比"><a href="#3-对比" class="headerlink" title="3.对比"></a>3.对比</h2><table>
<thead>
<tr>
<th align="center">项目</th>
<th align="center">数据报网络</th>
<th align="center">虚电路网络</th>
</tr>
</thead>
<tbody><tr>
<td align="center">是否建立连接</td>
<td align="center">不建立连接</td>
<td align="center">先建立连接</td>
</tr>
<tr>
<td align="center">地址</td>
<td align="center">每个在分组包含源和目的端地址</td>
<td align="center">每个分组含一个短的虚电路号</td>
</tr>
<tr>
<td align="center">分组顺序</td>
<td align="center">按序发送，不一定按序接收</td>
<td align="center">按序发送，按序接收</td>
</tr>
<tr>
<td align="center">路由选择</td>
<td align="center">每个分组独立路由选择</td>
<td align="center">建立VC时需要路由选择，之后所有分组都沿此路由转发</td>
</tr>
<tr>
<td align="center">典型网络</td>
<td align="center">因特网</td>
<td align="center">X.25&#x2F;帧中继&#x2F;ATM</td>
</tr>
</tbody></table>
<h1 id="三、网络互连与网络互连设备"><a href="#三、网络互连与网络互连设备" class="headerlink" title="三、网络互连与网络互连设备"></a>三、网络互连与网络互连设备</h1><h2 id="1-异构网络互连"><a href="#1-异构网络互连" class="headerlink" title="1. 异构网络互连"></a>1. 异构网络互连</h2><p>异构网络： 主要指两个网络的通信技术和运行协议的不同<br>异构网络互连的基本策略： <strong>协议转换</strong>和构建虚拟互联网络</p>
<h2 id="2-路由器"><a href="#2-路由器" class="headerlink" title="2. 路由器"></a>2. 路由器</h2><p>路由器：最典型的网络层设备，具有多个输入端口和多个输出端口的专用计算机，主要任务就是获取与维护路由信息以及转发分组</p>
<p>路由器从功能体系结构角度：</p>
<ul>
<li>输入端口：查找，转发，到达分组， 缓存排队功能</li>
<li>交换结构: 完成具体转发工作，将输入端口IP数据包交换到指定的输出端口<ol>
<li>基于内存交换：性能最低，价格最便宜</li>
<li>基于总线交换</li>
<li>基于网络交换：性能最高，价格最贵</li>
</ol>
</li>
<li>输出端口：缓存排队，从队列中取出分组进行数据链路层数据帧封装和发送<ol>
<li>先到先服务（FCFS）调度策略</li>
<li>按优先级调度、按IP数据报的服务类型调度</li>
</ol>
</li>
<li>路由处理器<ol>
<li>执行命令</li>
<li>路由协议运行</li>
<li>路由计算以及路由表的更新和维护</li>
</ol>
</li>
</ul>
<h1 id="四、网络层拥塞控制"><a href="#四、网络层拥塞控制" class="headerlink" title="四、网络层拥塞控制"></a>四、网络层拥塞控制</h1><blockquote>
<p>用户对网络资源(包括链路带宽、存储空间、处理器处理能力等)的总需求超过了挽留过固有的容量</p>
</blockquote>
<ul>
<li><p>网络负载在<strong>膝点</strong>附近时，兔兔量和分组平均延迟发稿理想的平衡，网络的<strong>使用效率最高</strong></p>
</li>
<li><p>发生拥塞的原因：</p>
<ul>
<li>缓冲区容量有限</li>
<li>传输线路的带宽有限</li>
<li>网络节点的处理能力有限</li>
<li>网络中门口写部分发生了故障</li>
</ul>
</li>
<li><p>解决方法</p>
<ul>
<li>流量感知路由： 权值根据网络负载动态调整，可以将网络流量引导到不同的链路上，均衡网路负载</li>
<li>准入控制： 广泛应用于<strong>虚电路网络</strong>的拥戴复方技术，对新建虚电路审核，如果建立的虚电路会导致网络变得拥塞，那么网络拒绝家里新虚电路</li>
<li>流量调节：在网络发生拥塞时，通过调整发送方发送数据的速率来消除拥塞<ul>
<li>抑制分组： 感知到拥塞的路由器选择一个被拥塞的数据报，给改数据报的源主机返回一个抑制分组</li>
<li>背压：音质分组在从拥塞节点到元几点的路径上的每一条，都发挥抑制作用</li>
</ul>
</li>
<li>负载脱落：有选择地主动丢弃一些数据报，减轻网络负载，从而缓解或消除拥塞</li>
</ul>
</li>
</ul>
<h1 id="五、Internet网络层"><a href="#五、Internet网络层" class="headerlink" title="五、Internet网络层"></a>五、Internet网络层</h1><h2 id="1-IPv4协议"><a href="#1-IPv4协议" class="headerlink" title="1. IPv4协议"></a>1. IPv4协议</h2><ul>
<li>IPv4:Internet网络层最核心的协议，定义了如何封装上层协议（如：TCP&#x2F;UDP）的报文段，Internet网络层寻址（IP寻址）以及如何转发IP数据报等内容</li>
</ul>
<img src="/2022/03/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/%E7%BD%91%E7%BB%9C%E5%B1%82/ipv4.png" srcset="/img/loading.gif" lazyload class="" title="IPv4结构">

<ol>
<li>版本号：4位。IP的版本号</li>
<li>首部长度： 4位。IP数据报的首部长度：20B-60B</li>
<li>区分服务：8 位。用来指示期望获得那种类型的服务  </li>
<li>数据长度：16位。IP数据报的总字节数</li>
<li>生存时间：8位。Time-To-Live, TTL.表示IP数据报在网络中可以通过的路由器书（跳步数）</li>
<li>上层协议：8位，指示IP数据报封装的是哪个上层协议（TCP:6, UDP:17）</li>
<li>数据校验和：16位，利用校验和实现对P数据报首部的差错检测</li>
<li>源IP地址：32位，发出IP数据报的源主机的IP地址</li>
<li>目的IP地址：32位，IP数据报需要东大的主机的IP地址</li>
<li>选项：长度可变</li>
<li>数据：存放IP数据报所封装的传输层报文段</li>
<li><strong>标识</strong> 16位，表示一个IP数据报。每产生一个IP数据报，IP协议的计数器加1，在IP数据报<strong>分片和重组</strong>的过程中用于标识数据同一个IP数据报。该字段不可唯一表示一个IP数据报</li>
<li><strong>标志</strong> 3位：<ul>
<li>DF 禁止分片: 0-可以分片， 1-禁止分片</li>
<li>MF 更多分片: 0-未被分片或分片的最后一片，1-是分片且不是最后一个</li>
</ul>
</li>
<li>片偏移量：以8B为单位。表示一个IP数据报分片与原UP数据报的数据的相对偏移量。当该字段值为0时，且MF&#x3D;1,则表示这是一个IP分片，且是第一个分片。</li>
</ol>
<h2 id="2-IPv4编址"><a href="#2-IPv4编址" class="headerlink" title="2. IPv4编址"></a>2. IPv4编址</h2><h3 id="一、IPv4地址长度为32位，共有2-23个不同的IP地址，约为43亿个"><a href="#一、IPv4地址长度为32位，共有2-23个不同的IP地址，约为43亿个" class="headerlink" title="一、IPv4地址长度为32位，共有2^23个不同的IP地址，约为43亿个"></a>一、IPv4地址长度为32位，共有2^23个不同的IP地址，约为43亿个</h3><h3 id="二、IPv4地址的三种标记方式："><a href="#二、IPv4地址的三种标记方式：" class="headerlink" title="二、IPv4地址的三种标记方式："></a>二、IPv4地址的三种标记方式：</h3><table>
<thead>
<tr>
<th align="center">方法</th>
<th align="center">表示方式</th>
</tr>
</thead>
<tbody><tr>
<td align="center">二进制标记法</td>
<td align="center">11000000 10101000 00000001 01100101</td>
</tr>
<tr>
<td align="center">点分十进制标记法</td>
<td align="center">192.168.1.101</td>
</tr>
<tr>
<td align="center">十六进制标记法</td>
<td align="center">0xC0A80165</td>
</tr>
</tbody></table>
<h3 id="三、IP地址分配"><a href="#三、IP地址分配" class="headerlink" title="三、IP地址分配"></a>三、IP地址分配</h3><ol>
<li>前端（Prefix）：即网络部分，用于描述主机所归属的网路<ul>
<li>分类地址：定长前缀（A&#x2F;B&#x2F;C&#x2F;D&#x2F;E类）</li>
<li>无类地址：前缀长度可变</li>
</ul>
</li>
<li>后缀（Postfix）：即主机部分，用于表示主机在网络中的唯一地址</li>
<li>A&#x2F;B&#x2F;C类地址：可以用于标识网络中的主机或路由器</li>
</ol>
<table>
<thead>
<tr>
<th align="center">类</th>
<th align="center">前缀长度</th>
<th align="center">前缀</th>
<th align="center">首字节(十进制)</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">8位</td>
<td align="center">0xxxxxxx</td>
<td align="center">0-127</td>
</tr>
<tr>
<td align="center">B</td>
<td align="center">16位</td>
<td align="center">10xxxxxx xxxxxxxx</td>
<td align="center">128-191</td>
</tr>
<tr>
<td align="center">C</td>
<td align="center">24位</td>
<td align="center">110xxxxx xxxxxxxx xxxxxxxx</td>
<td align="center">192-223</td>
</tr>
</tbody></table>
<p>4.子网掩码： 定义一个子网的网络前缀长度</p>
<ul>
<li>子网掩码位数：32位</li>
<li>书写形式：二进制，点分十进制</li>
<li>取值规则：对应前缀，前部位1，对应后缀，全部为0</li>
</ul>
<p>5.路由聚合：减少路由表项数，提高路由效率，将可以聚合在一起的子网聚合成一个大的子网 </p>
<h2 id="3-动态主机配置协议"><a href="#3-动态主机配置协议" class="headerlink" title="3. 动态主机配置协议"></a>3. 动态主机配置协议</h2><blockquote>
<p>DHCP在应用层实现，传输层使用UDP,DHCP服务器端口号67，DHCP客户端口号68</p>
</blockquote>
<p>工作过程</p>
<ul>
<li>第一步：DHCP服务器发现：广播方式</li>
<li>第二步：DHCP服务器提供：广播方式</li>
<li>第三步：DHCP请求：广播方式</li>
<li>第四步：DHCP确认</li>
</ul>
<h2 id="4-网络地址转换"><a href="#4-网络地址转换" class="headerlink" title="4. 网络地址转换"></a>4. 网络地址转换</h2><blockquote>
<p>(Network Address Translation, NAT) 使私有地址在公共Internet上正常通讯</p>
</blockquote>
<p>工作原理</p>
<ul>
<li><ol>
<li>从呢网出去的IP数据报，将其IP地址替换为NAT服务器用友的合法的公共IP地址，并将替换关系记录到NAT转换表中</li>
</ol>
</li>
<li><ol start="2">
<li>从公共互联网返回的IP数据报，依据其目的IP地址检索NAT转换表，并利用检索到的内部私有IP地址替换目的IP地址，然后将IP数据报转发到内部网络</li>
</ol>
</li>
</ul>
<h2 id="5-ICMP（互联网控制报文协议）"><a href="#5-ICMP（互联网控制报文协议）" class="headerlink" title="5. ICMP（互联网控制报文协议）"></a>5. ICMP（互联网控制报文协议）</h2><blockquote>
<p>进行主机或路由器间的网络层差错报告与网络探测</p>
</blockquote>
<p>差错报告报文</p>
<ul>
<li>终点不可达</li>
<li>原点抑制</li>
<li>时间超时</li>
<li>参数问题</li>
<li>路由重定向</li>
</ul>
<p>询问报文</p>
<ul>
<li>回声请求&#x2F;应答</li>
<li>时间戳请求&#x2F;应答</li>
</ul>
<h2 id="6-IPv6"><a href="#6-IPv6" class="headerlink" title="6. IPv6"></a>6. IPv6</h2><ol>
<li><p>IPv6地址长度为128位</p>
</li>
<li><p>IPv6地址表示方法</p>
<ul>
<li><ol>
<li>8组冒号分割的十六进制数，连续多组的 “0000” 可以采用压缩格式表示，利用“::”代替，注意：只能出现一次</li>
</ol>
</li>
<li><ol start="2">
<li>在IPv6地址中嵌入IPv4的点分十进制</li>
</ol>
</li>
</ul>
</li>
<li><p>分类</p>
<ul>
<li><ol>
<li>单播地址：可做源地址和目的地址</li>
</ol>
</li>
<li><ol start="2">
<li>组播地址：可做目的地址</li>
</ol>
</li>
<li><ol start="3">
<li>任播地址： 可做目的地址</li>
</ol>
</li>
</ul>
</li>
<li><p>IPv4到IPv6迁移</p>
<ol>
<li>双协议栈：网路结点同时具备发送IPv4与IPv6数据报的能力</li>
<li>隧道：很好地解决IPv6通信中经过IPv4路由器的温恩提，同时也不会出现信息丢失的问题</li>
</ol>
</li>
</ol>
<h1 id="六、路由算法与路由协议"><a href="#六、路由算法与路由协议" class="headerlink" title="六、路由算法与路由协议"></a>六、路由算法与路由协议</h1><h2 id="1-路由选择算法的分类"><a href="#1-路由选择算法的分类" class="headerlink" title="1. 路由选择算法的分类"></a>1. 路由选择算法的分类</h2><p>分类标准</p>
<ul>
<li><p>是否需要全局信息</p>
<ul>
<li>需要网络的完整信息 - 全局式路由选择算法 - 典型：链路状态路由选择算法(LS算法)</li>
<li>不需要网络的完整信息 - 分布式路由选择算法 - 典型：距离向量路由选择算法（DV算法）</li>
</ul>
</li>
<li><p>静态动态</p>
<ul>
<li>静态 - 人工配置</li>
<li>动态 - 网络发生变化，自动计算最佳路由 - LS&#x2F;DV算法</li>
</ul>
</li>
<li><p>是否敏感</p>
<ul>
<li>敏感 - 负载敏感的路由选择算法</li>
<li>延迟 - 负载迟钝的路由选择算法</li>
</ul>
</li>
</ul>
<h2 id="2-链路状态路由选择算法（LS算法）"><a href="#2-链路状态路由选择算法（LS算法）" class="headerlink" title="2. 链路状态路由选择算法（LS算法）"></a>2. 链路状态路由选择算法（LS算法）</h2><p>链路状态路由选择算法（LS算法）</p>
<ul>
<li>利用Dijkstra算法求<strong>最短路径</strong></li>
</ul>
<h2 id="3-距离向量路由选择算法"><a href="#3-距离向量路由选择算法" class="headerlink" title="3. 距离向量路由选择算法"></a>3. 距离向量路由选择算法</h2><p>分布式路由选择算法，每个节点仅掌握与所有邻居节点的直接链路代价</p>
<ul>
<li>基础是Bellman-Ford方程(简称B-F方程)</li>
</ul>
<h2 id="4-层次化路由选择"><a href="#4-层次化路由选择" class="headerlink" title="4. 层次化路由选择"></a>4. 层次化路由选择</h2><blockquote>
<p>层次化路由选择：大规模网络路由选择最有效可行的解决方法</p>
</blockquote>
<ol>
<li>自治系统(autonomous system,AS)：互联网按组织边界划分为多个自治系统。每个自治系统由运行<strong>相同</strong> 路由协议和路由选择算法的路由器组成</li>
<li>网关路由器：每个自治系统存在至少一个与其他自治系统互联的路由器</li>
<li>层次化路由选择原理，大规模互联网的路由划分为两层<ul>
<li>自治系统内路由选择：计算到达自治系统内目的网络的路由</li>
<li>自治系统间路由选择：负责其他自治系统网络的可达性信息</li>
</ul>
</li>
</ol>
<h2 id="5-Internet路由选择协议"><a href="#5-Internet路由选择协议" class="headerlink" title="5. Internet路由选择协议"></a>5. Internet路由选择协议</h2><h3 id="一-内部网关协议（IGP）-Internet自治系统内路由选择协议"><a href="#一-内部网关协议（IGP）-Internet自治系统内路由选择协议" class="headerlink" title="一. 内部网关协议（IGP）:Internet自治系统内路由选择协议"></a>一. 内部网关协议（IGP）:Internet自治系统内路由选择协议</h3><h3 id="1-路由信息协议（Routing-Infomation-Protocol-RIP）"><a href="#1-路由信息协议（Routing-Infomation-Protocol-RIP）" class="headerlink" title="1. 路由信息协议（Routing Infomation Protocol, RIP）"></a>1. 路由信息协议（Routing Infomation Protocol, RIP）</h3><ol>
<li>较小的AS。基于<strong>距离向量路由选择算法</strong>的IGP</li>
<li>RIP报文：封装进UDP数据报</li>
<li>特性：<ul>
<li><ol>
<li>RIP在度量路径时采用的是<strong>条数</strong></li>
</ol>
</li>
<li><ol start="2">
<li>RIP的费用定义在源路由器和目的子网之间</li>
</ol>
</li>
<li><ol start="3">
<li>RIP被限制在网络直径不超过<strong>15跳</strong>的自治系统内使用</li>
</ol>
</li>
</ul>
</li>
</ol>
<h3 id="2-开放最短路径优先协议（Open-Shortest-Path-First-OSPF）"><a href="#2-开放最短路径优先协议（Open-Shortest-Path-First-OSPF）" class="headerlink" title="2. 开放最短路径优先协议（Open Shortest Path First, OSPF）"></a>2. 开放最短路径优先协议（Open Shortest Path First, OSPF）</h3><ol>
<li>OSPF:较大规模的A。基于<strong>链路状态路由选择算法</strong>的IGP</li>
<li>直接封装在IP数据报传输</li>
<li>优点：<ul>
<li><ol>
<li>安全</li>
</ol>
</li>
<li><ol start="2">
<li>支持多条相同费用路径</li>
</ol>
</li>
<li><ol start="3">
<li>支持区别化费用度量</li>
</ol>
</li>
<li><ol start="4">
<li>支持单播路由与多播路由</li>
</ol>
</li>
<li><ol start="5">
<li>分层路由</li>
</ol>
</li>
</ul>
</li>
</ol>
<h3 id="二-外部网关协议（EGP）-Internet自治系统间路由选择协议"><a href="#二-外部网关协议（EGP）-Internet自治系统间路由选择协议" class="headerlink" title="二. 外部网关协议（EGP）:Internet自治系统间路由选择协议"></a>二. 外部网关协议（EGP）:Internet自治系统间路由选择协议</h3><ol>
<li><p>边界网关协议（Border Gateway Protocol, BGP）实现跨自治系统的路由信息交换。典型版本是BGP4,<br>  BGP主要有4种报文：</p>
<ul>
<li>OPEN(打开)报文</li>
<li>UPDATE(更新)报文</li>
<li>KEEPALIVE(保活)报文</li>
<li>NOTIFICATION(通知)报文</li>
</ul>
</li>
<li><p>总结</p>
<table>
<thead>
<tr>
<th align="center">协议名称</th>
<th align="center">封装</th>
<th align="center">适用范围</th>
</tr>
</thead>
<tbody><tr>
<td align="center">RIP</td>
<td align="center">UDP</td>
<td align="center">较小AS内</td>
</tr>
<tr>
<td align="center">OSPF</td>
<td align="center">IP数据报</td>
<td align="center">较大AS内</td>
</tr>
<tr>
<td align="center">BGP</td>
<td align="center">TCP报文段</td>
<td align="center">跨AS</td>
</tr>
</tbody></table>
</li>
</ol>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/">计算机网络原理</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E8%B7%AF%E7%94%B1/">路由</a>
                    
                      <a class="hover-with-bg" href="/tags/IP/">IP</a>
                    
                      <a class="hover-with-bg" href="/tags/%E7%BD%91%E7%BB%9C%E5%B1%82/">网络层</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/04/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/%E7%89%A9%E7%90%86%E5%B1%82/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">计算机网络原理-物理层</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/03/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/%E4%BC%A0%E8%BE%93%E5%B1%82/">
                        <span class="hidden-mobile">计算机网络原理-传输层</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'vvkeep/vvkeep-comment-utterances');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>












  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?235bcb93b73674205dcfe80bc941a80b";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
