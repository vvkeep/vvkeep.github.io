---
title: 计算机网络原理-网络层
date: 2022-03-09 21:54:33
toc: true
categories: "计算机网络原理"
tags: [路由, IP, 网络层]
---

# 一、网络层服务
任务：将数据从**源主机**送达到**目的主机**

功能：
 1. **转发**：当里输入链路接收到一个分组后，路由器需要决策那条输出链路将分组发送出去，并将分组从输入接口转移到输出接口
 2. **路由选择**：当分组从源主机流向目的主机是，必须通过某种方式决定分组经过的路由或路径
 3. **连接建立**：网络层连接是从源主机到目的主机主机经过的一条路径，这条路径经过的每个路由器等网络设备都要参与网络层连接的建立

# 二、数据报网络与虚电路网络

## 1. 数据报网络（无连接服务）
源主机没要发送一个分组，就为改分组加上**目的主机地址**,然后将改分组推进网络。每个路由器使用分组的**目的主机地址**转发分组


## 2. 虚电路网络（面向连接）
* 源主机到到目的主机的一条路径上建立的一条网络层逻辑连接，通信结束后再拆除连接

* 3个构成要素
    - 从源主机到目的主机之间的一条**路径**（一系列的链路和分组交换机）
    - 改路径上的每条链路的**虚电路标识**（VCID）
    - 分组交换机的转发表中记录虚电路标识的**接续**关系


## 3.对比

 |    项目     |   数据报网络           |   虚电路网络  |
 |:---------: |:--------------------:|:------------:|
 |是否建立连接  |  不建立连接   |   先建立连接  |
 |地址         |  每个在分组包含源和目的端地址   |   每个分组含一个短的虚电路号   |
 |分组顺序     |  按序发送，不一定按序接收    |   按序发送，按序接收   |
 |路由选择     |  每个分组独立路由选择   |   建立VC时需要路由选择，之后所有分组都沿此路由转发   |
 |典型网络     |   因特网      | X.25/帧中继/ATM |


# 三、网络互连与网络互连设备

## 1. 异构网络互连

异构网络： 主要指两个网络的通信技术和运行协议的不同
异构网络互连的基本策略： **协议转换**和构建虚拟互联网络

## 2. 路由器

路由器：最典型的网络层设备，具有多个输入端口和多个输出端口的专用计算机，主要任务就是获取与维护路由信息以及转发分组

路由器从功能体系结构角度：
  - 输入端口：查找，转发，到达分组， 缓存排队功能
  - 交换结构: 完成具体转发工作，将输入端口IP数据包交换到指定的输出端口
    1. 基于内存交换：性能最低，价格最便宜
    2. 基于总线交换
    3. 基于网络交换：性能最高，价格最贵
  - 输出端口：缓存排队，从队列中取出分组进行数据链路层数据帧封装和发送
    1. 先到先服务（FCFS）调度策略
    2. 按优先级调度、按IP数据报的服务类型调度
  - 路由处理器
    1. 执行命令
    2. 路由协议运行
    3. 路由计算以及路由表的更新和维护

# 四、网络层拥塞控制

> 用户对网络资源(包括链路带宽、存储空间、处理器处理能力等)的总需求超过了挽留过固有的容量

* 网络负载在**膝点**附近时，兔兔量和分组平均延迟发稿理想的平衡，网络的**使用效率最高**

* 发生拥塞的原因：
    - 缓冲区容量有限
    - 传输线路的带宽有限
    - 网络节点的处理能力有限
    - 网络中门口写部分发生了故障

* 解决方法
  - 流量感知路由： 权值根据网络负载动态调整，可以将网络流量引导到不同的链路上，均衡网路负载
  - 准入控制： 广泛应用于**虚电路网络**的拥戴复方技术，对新建虚电路审核，如果建立的虚电路会导致网络变得拥塞，那么网络拒绝家里新虚电路
  - 流量调节：在网络发生拥塞时，通过调整发送方发送数据的速率来消除拥塞
    - 抑制分组： 感知到拥塞的路由器选择一个被拥塞的数据报，给改数据报的源主机返回一个抑制分组
    - 背压：音质分组在从拥塞节点到元几点的路径上的每一条，都发挥抑制作用
  - 负载脱落：有选择地主动丢弃一些数据报，减轻网络负载，从而缓解或消除拥塞

# 五、Internet网络层

## 1. IPv4协议

## 2. IPv4编址

## 3. 动态主机配置协议

## 4. 网络地址转换

## 5. ICMP

## 6. IPv6


# 六、路由算法与路由协议
