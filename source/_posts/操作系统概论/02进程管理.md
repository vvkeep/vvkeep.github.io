---
title: 进程管理
date: 2024-03-09 23:09:03
toc: true
categories: "操作系统概论"
tags: [进程, 线程]
---

## 一、进程的描述

顺序执行： 顺序行、封闭性、可再现性

并发执行：统一时间间隔内运行多个程序
特点：间断性、失去封闭性、不可再现性

宏观并行：用户看到多个程序同时向前推进
微观串行： 任意时刻一个CPU只有一个程序在执行

### 进程的概念
定义1： 允许并发执行的程序在某个数据集合上的运行过程
定义2： 进程 = 正文段 + 用户数据段 + 进程控制块（PCB）

1、并发性
2、动态行
3、独立性
4、异步性
5、结构特征

### 进程控制块
进程控制块是进程实体的一部分，是操作系统中最重要的数据结构 
进程控制块中记录了操作系统所需要的、用于描述进程及控制进程运行所需要的全部信息
进程标识符信息
处理机状态信息
    - 通用寄存器
    - 指令计数器
    - 程序状态字PSW
    - 用户站指针
进程调度信息
进程控制信息

### 进程的状态
执行态
就绪态
阻塞态

进程的组织：
索引方式

把系统中具有相同状态的进程控制块PCB用其中的连接字连成一个队列
执行指针
就绪队列指针
阻塞队列指针

系统根据所有进程的状态，建立索引表。索引表的每一个表项指向一个PCB物理块

## 二、进程的控制

创建
阻塞
唤醒
终止

## 三、操作系统内核

### 中断
是改变处理器执行指令顺序的一种事件

同步中断  内部中断/异常
异步中断  外部中断，外部可屏蔽中断、外部不可屏蔽中断

响应中断的条件
响应中断的时机 

### 核心功能
支撑功能
- 中断处理
- 时钟管理
- 原语管理

资源管理功能：
- 进程管理
- 存储器管理
- 设备管理

### 时钟
计算机的很多活动都是由定时测量来驱动的
操作系统内核需要完成的两种定时测量是保存当前的日期和时间 和 维持定时器
实时时钟RTC CMOS
OS时钟

时钟驱动程序
- 1. 维护日期和时间
- 2. 递减当前进程在一个时间片内的剩余执行时间，防止运行超时
- 3. 对CPU的使用情况记账
- 4. 递减报警器计数器

系统调用
系统调用是一群预先定义好的模块，提供一条管道让应用程序能由此到核心程序的服务，是系统程序与用户程序之间的接口

系统调佣 和 一般函数调用的区别

用户空间  用户进程所处的地址空间
用户态执行(目态)  CPU执行用户空间代码

系统空间    含有一切系统核心代码的地址空间
系统态执行(管态) CPU执行系统核心代码


系统调用的类型
- 1 进程控制类
- 2 文件操纵类
- 3 设备管理类
- 4 通信类
- 5 信息维护类


## 四、进程同步

多道程序环境下进程之间的关系
资源共享关系：保证各进程以互斥的方式访问临界资源，进程中访问临界资源的那段代码称为临界区
相互合作关系：保证相互合作的进程协调执行

同步机制准则
空闲让进、忙则等待、有限等待、让权等待

信号量机制
整型信号量机制
表示共享资源状态且只能由特殊的原子操作改变整形量
原理： 定义一个整形变量，用该变量值标记资源的使用情况

整形信号量 >0 有资源可用
整形信号量 <=0 资源忙，需等待

记录型信号量机制

## 五、进程通信

共享存储器系统
消息传递系统
管道通信
消息缓冲队列 --- 不是高级通信方式

## 六、线程

资源和调度：线程是程序执行的基本单位，进程是拥有资源的基本单位
地址空间资源： 不同进程地址空间相互独立，而同一进程中的各线程共享统一地址空间
通信关系：同一进程中的各线程间可以直接通讯
并发行：多进程之间可以并发执行，多线程之间也可以并发执行
系统开销：线程切换的开销比进程奇幻的开销小

阻塞原因：
- 1.请求系统服务
- 2.启动某种操作
- 3.新数据尚未到达

终止原因:
- 1. 正常结束
- 2. 异常结束
- 3. 外界干扰





